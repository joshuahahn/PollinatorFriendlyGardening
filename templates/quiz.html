{% extends "layout.html" %}

{% block title %}Quiz{% endblock %}

{% block content %}
    <h1>Knowledge Quiz</h1>

    <div class="quiz-container">
        <h3>Pollinator Category</h3>
        <div class="categories">
            <div class="category droppable" data-category="bee">Bee</div>
            <div class="category droppable" data-category="bird">Bird</div>
            <div class="category droppable" data-category="insect">Insect</div>
        </div>
        <h3>Images to Classify: {{ plant_name }}</h3>
        <div class="image-container">
            <img src="{{ url_for('static', filename='imgs/' + img_url) }}" class="draggable" data-name="{{ plant_name }}" data-category="{{ plant_label }}">
        </div>

        <button id="nxt" class="nxt-btn">Next question</button>
    </div>
    

    <!-- <button id="submit-btn">Submit Quiz</button> -->
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script> <!-- Include jQuery UI -->
    <script>
        $(document).ready(function() {
            // Enable draggable for images
            $(".draggable").draggable({
                revert: true
            });

            // Enable droppable for categories
            $(".droppable").droppable({
                accept: ".draggable",
                drop: function(event, ui) {
                    var droppedItem = ui.draggable;
                    var droppedPlant = droppedItem.data("name");
                    var droppedFoodCategory = droppedItem.data("category");
                    var category = $(this).data("category");
                    console.log("Dropped", droppedPlant, "into", category, "true label:", droppedFoodCategory);
                }
            });

            $("#nxt").click(function () {
                window.location.href = "/quiz/" + "{{ nxt_id }}"
            })
            // Submit quiz button
            // $("#submit-btn").click(function() {
            //     var quizResults = {}; // Object to store quiz results
            //     // Send quiz results via AJAX
            //     $.ajax({
            //         type: "POST",
            //         url: "/submit_quiz",
            //         contentType: "application/json",
            //         data: JSON.stringify(quizResults),
            //         success: function(response) {
            //             console.log("Quiz submitted successfully!");
            //         },
            //         error: function(error) {
            //             console.error("Error submitting quiz:", error);
            //         }
            //     });
            // });
        });
    </script>
{% endblock %}